const mongoose = require('mongoose')
const IncomingForm = require('formidable').IncomingForm
const Intro = mongoose.model('Intro')

module.exports.sendIntro = function (req, res) {

    Intro.find({}).exec(function (err, result) {
        if (err) throw err
        let results = JSON.stringify(result)
        res.status(200)
        res.json(results)
    })

}

module.exports.updateIntro = function (req, res) {

    var form = new IncomingForm()

    form.on('file', (field, file) => {

        let selectiveData = JSON.parse(file.name)
        let intro = {
            text: selectiveData.text
        }

    })

    form.on('end', () => {

        res.status(200).json('OK');

    })

    form.parse(req)

};